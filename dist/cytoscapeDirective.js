angular.module("app").directive("cytoscape",function(e){return{restrict:"E",template:'<div id="cy"></div>',replace:!0,scope:{elements:"=",styles:"=",layout:"=",selectedElements:"=",highlightByName:"=",onComplete:"=",onChange:"=",navigatorContainerId:"@",contextMenuCommands:"="},link:function(n,t,o,a){alert("ee"),n.$watchGroup(["elements","styles","layout"],function(n,o,a){var i=!0;for(var s in n)n[s]||(i=!1);if(i){var r=n[0],l=n[1],m=n[2];cytoscape({container:t[0],elements:r,style:l,layout:m,boxSelectionEnabled:!0,motionBlur:!1,wheelSensitivity:.2,ready:function(){var n=this,t=function(e){if(e){m.maxSimulationTime=10,m.fit=!1;var t=e.makeLayout(m);t.pon("layoutstop").then(function(e){m.maxSimulationTime=2e3,n.elements().makeLayout(m).run()}),t.run()}};n.on("tap",function(t){e(function(){a.selectedElements=n.$(":selected")},10)}),n.on("mouseout",function(){n.elements().removeClass("mouseover"),n.elements().removeClass("edge-related")}),n.on("mouseover",function(e){var n=e.cyTarget;n!=e.cy&&(n.addClass("mouseover"),n.neighborhood().edges().addClass("edge-related"))}),a.$on("cytoscapeAddElements",function(e,o){var i=o.elements,s=n.add(i);t(s),a.onChange(n,o.forceApply)}),a.$on("cytoscapeDeleteElements",function(e,t){var o=t.elements;try{n.remove(o)}catch(i){for(var s in o)n.remove(n.$("#"+o[s].data.id))}a.onChange(n,t.forceApply)}),a.$watch("highlightByName",function(e){if(n.elements().addClass("searched"),e&&e.length>0){var t=e.toLowerCase().trim(),o=function(e,n){var o=n.data().name.toLowerCase().trim();o.indexOf(t)>-1&&n.removeClass("searched")};n.nodes().each(o)}else n.elements().removeClass("searched")}),a.navigatorContainerId&&n.navigator({container:document.getElementById(a.navigatorContainerId)}),a.contextMenuCommands&&n.cxtmenu({menuRadius:75,indicatorSize:17,activePadding:10,selector:"node",commands:a.contextMenuCommands}),a.onComplete&&a.onComplete({graph:n,layout:m})}})}})}}});